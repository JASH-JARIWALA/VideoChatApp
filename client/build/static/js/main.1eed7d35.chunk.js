(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t){},116:function(e,t){},118:function(e,t){},132:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),l=a.n(c),o=(a(69),a(6)),i=a(56),u=(a(70),a(57)),s=a.n(u),m=a(28),d=a.n(m),f=a(58),g=a(143),v=a(145),E=a(144),b=a(142),p=a(63),j=a(15),k=a(137),y=a(138),O=a(139),h=a(140),C=a(141);function S(){var e=Object(i.a)(["\n  display: flex;\n  width: 100%;\n"]);return S=function(){return e},e}var T=new Audio("./skype_remix_2.mp3");T.loop=!0;var w=f.a.div(S());var N=function(){var e=Object(n.useRef)(null),t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)({}),u=Object(o.a)(i,2),m=u[0],f=u[1],S=Object(n.useState)(),N=Object(o.a)(S,2),D=N[0],M=N[1],z=Object(n.useState)(!1),x=Object(o.a)(z,2),A=x[0],L=x[1],R=Object(n.useState)(""),U=Object(o.a)(R,2),V=U[0],I=U[1],P=Object(n.useState)(),B=Object(o.a)(P,2),W=B[0],F=B[1],J=Object(n.useState)(!1),_=Object(o.a)(J,2),G=_[0],H=_[1],Y=Object(n.useState)(!1),$=Object(o.a)(Y,2),q=$[0],K=$[1],Q=Object(n.useState)(""),X=Object(o.a)(Q,2),Z=X[0],ee=X[1],te=Object(n.useRef)(),ae=Object(n.useRef)(),ne=Object(n.useRef)(),re=Object(n.useState)(!0),ce=Object(o.a)(re,2),le=ce[0],oe=ce[1],ie=Object(n.useState)(!0),ue=Object(o.a)(ie,2),se=ue[0],me=ue[1],de=Object(n.useState)("user"),fe=Object(o.a)(de,2),ge=fe[0],ve=fe[1];Object(n.useEffect)((function(){ne.current=s.a.connect(""),navigator.mediaDevices.getUserMedia({video:{facingMode:ge},audio:!0}).then((function(e){M(e),te.current&&(te.current.srcObject=e)})).catch((function(e){j.b.error("Provide Permission")})),ne.current.on("yourID",(function(e){l(e)})),ne.current.on("allUsers",(function(e){console.log(e),f(e)})),ne.current.on("receiveCall",(function(e){console.log("Reciving"),L(!0),I(e.from.name),ee(e.from.id),F(e.signal)})),ne.current.on("changeNameStatus",(function(e){e.status||j.b.error("name already taken!")}))}),[]);var Ee,be,pe,je,ke,ye=r.a.createElement(g.a,{onSubmit:function(e){e.preventDefault();var t=e.target.name.value,a=!1;Object.keys(m).forEach((function(e){e!==c&&t===m[e]&&(a=!0)})),a?j.b.error("name already taken!"):ne.current.emit("changeName",{name:t})}},r.a.createElement(g.a.Group,{controlId:"name"},r.a.createElement(g.a.Label,null,"Change Display name"),r.a.createElement(g.a.Control,{type:"text",placeholder:"Enter name"})),r.a.createElement(v.a,{variant:"primary",type:"submit",size:"sm"},r.a.createElement("small",null,"Change Name")));D&&(Ee=r.a.createElement("video",{className:"userVideo",playsInline:!0,muted:!0,ref:te,autoPlay:!0}),"professor"===m[c]&&(be=Object.keys(m).map((function(t){return t===c?null:r.a.createElement(v.a,{variant:"primary",onClick:function(){return a=t,e.current=new d.a({initiator:!0,trickle:!1,stream:D}),console.log("Call user"),e.current.on("signal",(function(e){ne.current.emit("callUser",{userToCall:a,signalData:e,from:c})})),e.current.on("stream",(function(e){ae.current&&(ae.current.srcObject=e)})),ne.current.on("callAccepted",(function(t){H(!0),ee(a),e.current.signal(t),K(!0),console.log("accepted")})),e.current.on("error",(function(e){console.log(e),"Call ended"!==e&&alert("Connection error or client closed webpage!"),ee(""),H(!1),K(!1),ne.current.removeListener("callAccepted"),ne.current.removeListener("videoStatusChange"),ne.current.removeListener("audioStatusChange")})),ne.current.on("callEnded",(function(){e.current.destroy("Call ended")})),void ne.current.on("error",(function(t){e.current.destroy(t.message)}));var a},disabled:q,style:{margin:5}},"Call ",m[t])})))),G&&(pe=r.a.createElement("video",{className:"partnerVideo",playsInline:!0,ref:ae,autoPlay:!0}),je=r.a.createElement("div",{className:"endCallButton"},r.a.createElement(v.a,{variant:"danger",onClick:function(){ne.current.emit("endCall",{id:Z})}},"End Call")));var Oe,he,Ce=le?"success":"danger",Se=se?"success":"danger",Te=le?r.a.createElement(k.a,{size:20}):r.a.createElement(y.a,{size:20}),we=se?r.a.createElement(O.a,{size:20}):r.a.createElement(h.a,{size:20});return ke=r.a.createElement(w,{className:"justify-content-md-center"},r.a.createElement(v.a,{variant:Ce,onClick:function(){var t=D.getVideoTracks()[0];"ended"===t.readyState?navigator.mediaDevices.getUserMedia({video:{facingMode:ge}}).then((function(a){var n=a.getVideoTracks()[0];D.removeTrack(t),D.addTrack(n),oe(!0),G&&e.current.replaceTrack(t,n,D)})):"live"===t.readyState&&(t.stop(),oe(!1),G&&e.current.replaceTrack(t,t,D))},style:{margin:5}}," ",Te," "),r.a.createElement(v.a,{variant:Se,onClick:function(){var t=D.getAudioTracks()[0];"ended"===t.readyState?navigator.mediaDevices.getUserMedia({audio:!0}).then((function(a){var n=a.getAudioTracks()[0];D.removeTrack(t),D.addTrack(n),me(!0),G&&e.current.replaceTrack(t,n,D)})):"live"===t.readyState&&(t.stop(),me(!1),G&&e.current.replaceTrack(t,t,D))},style:{margin:5}}," ",we," "),le&&r.a.createElement(v.a,{onClick:function(){var t=D.getVideoTracks()[0];t.stop(),ve("user"===ge?"environment":"user"),navigator.mediaDevices.getUserMedia({video:{facingMode:ge}}).then((function(a){var n=a.getVideoTracks()[0];console.log(n),Object(j.b)(n.id),D.removeTrack(t),D.addTrack(n),oe(!0),G&&e.current.replaceTrack(t,n,D)}))},style:{margin:5}}," ",r.a.createElement(C.a,null)," ")),"professor"!==m[c]&&Object.keys(m).forEach((function(e){e!==c&&"professor"===m[e]&&(Oe="Professor online")})),A&&m[Z]?(T.play(),he=r.a.createElement("div",{className:"incommingCall"},r.a.createElement(E.a,{className:"text-center",style:{background:"black",color:"white"}},r.a.createElement(E.a.Header,null,r.a.createElement("h2",null,V," is calling you")),r.a.createElement(E.a.Body,null,r.a.createElement(E.a.Title,null),r.a.createElement(b.a,null,r.a.createElement(w,null,r.a.createElement(p.a,null,r.a.createElement(v.a,{size:"lg",variant:"danger",onClick:function(){}},"Reject")),r.a.createElement(p.a,null,r.a.createElement(v.a,{size:"lg",variant:"success",onClick:function(){T.pause(),T.currentTime=0,H(!0),L(!1),K(!0),e.current=new d.a({initiator:!1,trickle:!1,stream:D}),e.current.on("signal",(function(e){ne.current.emit("acceptCall",{signal:e,to:Z})})),e.current.on("stream",(function(e){ae.current.srcObject=e})),e.current.signal(W),e.current.on("error",(function(e){console.log(e),"Call ended"!==e&&alert("Connection error or client closed webpage!"),H(!1),I(""),ee(""),F(),K(!1),ne.current.removeListener("videoStatusChange"),ne.current.removeListener("audioStatusChange")})),ne.current.on("callEnded",(function(){e.current.destroy("Call ended")}))}},"Accept"))))),r.a.createElement(E.a.Footer,{className:"text-muted"})))):(T.pause(),T.currentTime=0),r.a.createElement(r.a.Fragment,null,he,pe,r.a.createElement("div",{className:"userElements"},Ee,ke),je,r.a.createElement(b.a,{style:{color:"white"},fluid:!0},r.a.createElement(w,null,be),r.a.createElement(w,null,r.a.createElement(p.a,null,r.a.createElement("h4",null,"You: ",m[c]),ye,r.a.createElement(w,{style:{color:"green",fontWeight:"bold"}},Oe))),r.a.createElement(j.a,{autoClose:2e3})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(130),a(131);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},64:function(e,t,a){e.exports=a(132)},69:function(e,t,a){},70:function(e,t,a){}},[[64,1,2]]]);
//# sourceMappingURL=main.1eed7d35.chunk.js.map
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{114:function(e,t){},130:function(e,t){},132:function(e,t){},146:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),o=n.n(c),l=(n(83),n(6)),i=n(67),u=(n(84),n(68)),s=n.n(u),d=n(39),m=n.n(d),g=n(73),f=n(156),v=n(158),b=n(157),E=n(155),y=n(77),p=n(23),j=n(151),k=n(152),O=n(153),h=n(154);function C(){var e=Object(i.a)(["\n  display: flex;\n  width: 100%;\n"]);return C=function(){return e},e}function S(e){return r.a.createElement(f.a,Object.assign({},e,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,backdrop:"static",keyboard:!1}),r.a.createElement(f.a.Header,{closeButton:!0,style:{background:"grey"}},r.a.createElement(f.a.Title,{id:"contained-modal-title-vcenter"},"Receiving Call")),r.a.createElement(f.a.Body,{style:{background:"grey"}},r.a.createElement("div",{style:{background:"grey"}},r.a.createElement("h4",null,e.caller," is calling you."))),r.a.createElement(f.a.Footer,{style:{background:"grey"}},r.a.createElement(v.a,{variant:"danger",onClick:e.onHide},"Reject"),r.a.createElement(v.a,{variant:"success",onClick:e.acceptCall},"Accept")))}var w=g.a.div(C());var T=function(){var e=Object(a.useRef)(null),t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)({}),u=Object(l.a)(i,2),d=u[0],g=u[1],f=Object(a.useState)(),C=Object(l.a)(f,2),T=C[0],D=C[1],R=Object(a.useState)(!1),L=Object(l.a)(R,2),P=L[0],z=L[1],A=Object(a.useState)(""),I=Object(l.a)(A,2),N=I[0],U=I[1],B=Object(a.useState)(),M=Object(l.a)(B,2),V=M[0],x=M[1],H=Object(a.useState)(!1),W=Object(l.a)(H,2),F=W[0],J=W[1],G=Object(a.useState)(!1),Y=Object(l.a)(G,2),$=Y[0],q=Y[1],K=Object(a.useState)(""),Q=Object(l.a)(K,2),X=Q[0],Z=Q[1],_=Object(a.useRef)(),ee=Object(a.useRef)(),te=Object(a.useRef)(),ne=Object(a.useState)(!0),ae=Object(l.a)(ne,2),re=ae[0],ce=ae[1],oe=Object(a.useState)(!0),le=Object(l.a)(oe,2),ie=le[0],ue=le[1];Object(a.useEffect)((function(){te.current=s.a.connect(""),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){D(e),_.current&&(_.current.srcObject=e)})).catch((function(e){p.b.error("Provide Permission")})),te.current.on("yourID",(function(e){o(e)})),te.current.on("allUsers",(function(e){console.log(e),g(e)})),te.current.on("receiveCall",(function(e){console.log("Reciving"),z(!0),U(e.from.name),Z(e.from.id),x(e.signal)})),te.current.on("changeNameStatus",(function(e){e.status||p.b.error("name already taken!")}))}),[]);var se,de,me,ge,fe,ve,be=r.a.createElement(b.a,{onSubmit:function(e){e.preventDefault();var t=e.target.name.value,n=!1;Object.keys(d).forEach((function(e){e!==c&&t===d[e]&&(n=!0)})),n?p.b.error("name already taken!"):te.current.emit("changeName",{name:t})}},r.a.createElement(w,null,r.a.createElement(b.a.Group,{controlId:"name"},r.a.createElement(b.a.Label,null,"Change Display name"),r.a.createElement(b.a.Control,{type:"text",placeholder:"Enter name"}))),r.a.createElement(v.a,{variant:"primary",type:"submit"},"Change Name"));T&&(se=r.a.createElement("video",{className:"userVideo",playsInline:!0,muted:!0,ref:_,autoPlay:!0}),"professor"===d[c]&&(de=Object.keys(d).map((function(t){return t===c?null:r.a.createElement(v.a,{variant:"primary",onClick:function(){return n=t,e.current=new m.a({initiator:!0,trickle:!1,stream:T}),console.log("Call user"),e.current.on("signal",(function(e){te.current.emit("callUser",{userToCall:n,signalData:e,from:c})})),e.current.on("stream",(function(e){ee.current&&(ee.current.srcObject=e)})),te.current.on("callAccepted",(function(t){J(!0),Z(n),e.current.signal(t),q(!0),console.log("accepted")})),e.current.on("error",(function(e){console.log(e),"Call ended"!==e&&alert("Connection error or client closed webpage!"),Z(""),J(!1),q(!1),te.current.removeListener("callAccepted"),te.current.removeListener("videoStatusChange"),te.current.removeListener("audioStatusChange")})),te.current.on("callEnded",(function(){e.current.destroy("Call ended")})),void te.current.on("error",(function(t){e.current.destroy(t.message)}));var n},disabled:$,style:{margin:5}},"Call ",d[t])})))),F&&(me=r.a.createElement("video",{className:"partnerVideo",playsInline:!0,ref:ee,autoPlay:!0}),fe=r.a.createElement("h4",null,"Partner: ",d[X]),ge=r.a.createElement(v.a,{variant:"danger",onClick:function(){te.current.emit("endCall",{id:X})}},"End Call"));var Ee,ye=re?"success":"danger",pe=ie?"success":"danger",je=re?r.a.createElement(j.a,{size:50}):r.a.createElement(k.a,{size:50}),ke=ie?r.a.createElement(O.a,{size:50}):r.a.createElement(h.a,{size:50});return ve=r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{variant:ye,onClick:function(){var t=T.getVideoTracks()[0];"ended"===t.readyState?navigator.mediaDevices.getUserMedia({video:!0}).then((function(n){var a=n.getVideoTracks()[0];T.removeTrack(t),T.addTrack(a),ce(!0),F&&e.current.replaceTrack(t,a,T)})):"live"===t.readyState&&(t.stop(),ce(!1),F&&e.current.replaceTrack(t,t,T))},style:{margin:5}}," ",je," "),r.a.createElement(v.a,{variant:pe,onClick:function(){var t=T.getAudioTracks()[0];"ended"===t.readyState?navigator.mediaDevices.getUserMedia({audio:!0}).then((function(n){var a=n.getAudioTracks()[0];T.removeTrack(t),T.addTrack(a),ue(!0),F&&e.current.replaceTrack(t,a,T)})):"live"===t.readyState&&(t.stop(),ue(!1),F&&e.current.replaceTrack(t,t,T))},style:{margin:5}}," ",ke," ")),"professor"!==d[c]&&Object.keys(d).forEach((function(e){e!==c&&"professor"===d[e]&&(Ee="Professor online")})),r.a.createElement(E.a,{style:{color:"white"},fluid:!0},r.a.createElement(w,null,de),r.a.createElement(w,null,ge),r.a.createElement(w,null,r.a.createElement(y.a,null,se,r.a.createElement(w,null,ve),r.a.createElement("h4",null,"You: ",d[c]),be),r.a.createElement(y.a,null,me,fe)),r.a.createElement(w,null,r.a.createElement("h5",{style:{color:"green",fontWeight:"bold",margin:5}},Ee)),r.a.createElement(S,{show:P,caller:N,acceptCall:function(){J(!0),z(!1),q(!0),e.current=new m.a({initiator:!1,trickle:!1,stream:T}),e.current.on("signal",(function(e){te.current.emit("acceptCall",{signal:e,to:X})})),e.current.on("stream",(function(e){ee.current.srcObject=e})),e.current.signal(V),e.current.on("error",(function(e){console.log(e),"Call ended"!==e&&alert("Connection error or client closed webpage!"),J(!1),U(""),Z(""),x(),q(!1),te.current.removeListener("videoStatusChange"),te.current.removeListener("audioStatusChange")})),te.current.on("callEnded",(function(){e.current.destroy("Call ended")}))},onHide:function(){}}),r.a.createElement(p.a,{autoClose:2e3}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(144),n(145);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},78:function(e,t,n){e.exports=n(146)},83:function(e,t,n){},84:function(e,t,n){}},[[78,1,2]]]);
//# sourceMappingURL=main.dcd5fecd.chunk.js.map
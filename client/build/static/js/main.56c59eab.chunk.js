(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t){},113:function(e,t){},115:function(e,t){},148:function(e,t,n){"use strict";n.r(t);var s=n(0),u=n.n(s),r=n(10),a=n.n(r),c=(n(70),n(6)),l=n(56),o=(n(71),n(57)),i=n.n(o),m=n(27),d=n.n(m),v=n(59),p=n(159),g=n(161),f=n(160),b=n(158),E=n(63),h=n(13),k=n(153),y=n(154),j=n(155),O=n(156),C=n(157),S=n(58),T=n.n(S);function w(){var e=Object(l.a)(["\n  display: flex;\n  width: 100%;\n"]);return w=function(){return e},e}var z=new Audio("./skype_remix_2.mp3");z.loop=!0;var L=function(){return u.a.createElement(T.a,{type:"TailSpin",color:"#00BFFF"})},x=v.a.div(w());var N=function(){var e=Object(s.useRef)(null),t=Object(s.useState)(""),n=Object(c.a)(t,2),r=n[0],a=n[1],l=Object(s.useState)({}),o=Object(c.a)(l,2),m=o[0],v=o[1],S=Object(s.useState)(),T=Object(c.a)(S,2),w=T[0],N=T[1],D=Object(s.useState)(!1),P=Object(c.a)(D,2),A=P[0],M=P[1],R=Object(s.useState)(""),V=Object(c.a)(R,2),B=V[0],F=V[1],I=Object(s.useState)(),U=Object(c.a)(I,2),G=U[0],q=U[1],J=Object(s.useState)(!1),W=Object(c.a)(J,2),_=W[0],H=W[1],Y=Object(s.useState)(!1),$=Object(c.a)(Y,2),K=$[0],Q=$[1],X=Object(s.useState)(!1),Z=Object(c.a)(X,2),ee=Z[0],te=Z[1],ne=Object(s.useState)(!1),se=Object(c.a)(ne,2),ue=se[0],re=se[1],ae=Object(s.useState)(""),ce=Object(c.a)(ae,2),le=ce[0],oe=ce[1],ie=Object(s.useRef)(),me=Object(s.useRef)(),de=Object(s.useRef)(),ve=Object(s.useState)(!0),pe=Object(c.a)(ve,2),ge=pe[0],fe=pe[1],be=Object(s.useState)(!0),Ee=Object(c.a)(be,2),he=Ee[0],ke=Ee[1],ye=Object(s.useState)(!1),je=Object(c.a)(ye,2),Oe=je[0],Ce=je[1],Se=Object(s.useState)("user"),Te=Object(c.a)(Se,2),we=Te[0];function ze(){Re(1e3),Oe&&Le(),setTimeout((function(){var t=w.getVideoTracks()[0];"ended"===t.readyState?navigator.mediaDevices.getUserMedia({video:{facingMode:we}}).then((function(n){var s=n.getVideoTracks()[0];w.removeTrack(t),w.addTrack(s),fe(!0),_&&e.current.replaceTrack(t,s,w)})):"live"===t.readyState&&(t.stop(),fe(!1),_&&e.current.replaceTrack(t,t,w))}),500)}function Le(){Re(1e3),ge&&ze(),setTimeout((function(){var t=w.getVideoTracks()[0];"ended"===t.readyState?navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0}).then((function(n){var s=n.getVideoTracks()[0];w.removeTrack(t),w.addTrack(s),Ce(!0),_&&e.current.replaceTrack(t,s,w),w.getVideoTracks()[0].addEventListener("ended",(function(){Ce(!1)}))})):"live"===t.readyState&&(t.stop(),Ce(!1),_&&e.current.replaceTrack(t,t,w))}),500)}Te[1],Object(s.useEffect)((function(){de.current=i.a.connect(""),navigator.mediaDevices.getUserMedia({video:{facingMode:we},audio:!0}).then((function(e){N(e),ie.current&&(ie.current.srcObject=e)})).catch((function(e){h.b.error("Provide Permission")})),de.current.on("yourID",(function(e){a(e)})),de.current.on("allUsers",(function(e){console.log(e),v(e)})),de.current.on("receiveSignal",(function(e){console.log("Reciving signal"),q(e.signal)})),de.current.on("receiveCall",(function(e){console.log("Reciving"),M(!0),re(!0),F(e.from.name),oe(e.from.id)})),de.current.on("changeNameStatus",(function(e){e.status||h.b.error("name already taken!")}))}),[]),Object(s.useEffect)((function(){de.current.on("callPermissionGranted",(function(e){m[e.from]&&(console.log("Permission Granted from "+m[e.from]),te(e.from))}))}),[m]);var xe,Ne,De,Pe,Ae,Me,Re=function(e){Q(!0),setTimeout((function(){Q(!1)}),e)},Ve=u.a.createElement(p.a,{onSubmit:function(e){e.preventDefault();var t=e.target.name.value,n=!1;Object.keys(m).forEach((function(e){e!==r&&t===m[e]&&(n=!0)})),n?h.b.error("name already taken!"):de.current.emit("changeName",{name:t})}},u.a.createElement(p.a.Group,{controlId:"name"},u.a.createElement(p.a.Label,null,"Change Display name"),u.a.createElement(p.a.Control,{type:"text",placeholder:"Enter name"})),u.a.createElement(g.a,{variant:"primary",type:"submit",size:"sm"},u.a.createElement("small",null,"Change Name")));w&&(xe=u.a.createElement("video",{className:"userVideo",playsInline:!0,muted:!0,ref:ie,autoPlay:!0}),Ne=Object.keys(m).map((function(e){return e===r?null:u.a.createElement(u.a.Fragment,null,u.a.createElement(g.a,{variant:"success",onClick:function(){return t=e,void de.current.emit("giveCallPermission",{from:r,to:t});var t},disabled:ue,style:{margin:5}},"give Permission to ",m[e]))})),ee&&(De=u.a.createElement(g.a,{variant:"primary",onClick:function(){return t=ee,re(!0),e.current=new d.a({initiator:!0,trickle:!1,stream:w,reconnectTimer:!0,config:{iceServers:[{urls:"stun:stun.12connect.com:3478"},{urls:"stun:stun.12voip.com:3478"},{urls:"stun:stun.1und1.de:3478"},{urls:"stun:stun.3cx.com:3478"},{urls:"stun:stun.acrobits.cz:3478"},{urls:"stun:stun.actionvoip.com:3478"},{urls:"stun:stun.advfn.com:3478"},{urls:"stun:stun.altar.com.pl:3478"},{urls:"stun:stun.antisip.com:3478"},{urls:"stun:stun.avigora.fr:3478"},{urls:"stun:stun.bluesip.net:3478"},{urls:"stun:stun.cablenet-as.net:3478"},{urls:"stun:stun.callromania.ro:3478"},{urls:"stun:stun.callwithus.com:3478"},{urls:"stun:stun.cheapvoip.com:3478"},{urls:"stun:stun.cloopen.com:3478"},{urls:"stun:stun.commpeak.com:3478"},{urls:"stun:stun.cope.es:3478"},{urls:"stun:stun.counterpath.com:3478"},{urls:"stun:stun.counterpath.net:3478"},{urls:"stun:stun.dcalling.de:3478"},{urls:"stun:stun.demos.ru:3478"},{urls:"stun:stun.dus.net:3478"},{urls:"stun:stun.easycall.pl:3478"},{urls:"stun:stun.easyvoip.com:3478"},{urls:"stun:stun.ekiga.net:3478"},{urls:"stun:stun.epygi.com:3478"},{urls:"stun:stun.etoilediese.fr:3478"},{urls:"stun:stun.faktortel.com.au:3478"},{urls:"stun:stun.freecall.com:3478"},{urls:"stun:stun.freeswitch.org:3478"},{urls:"stun:stun.freevoipdeal.com:3478"},{urls:"stun:stun.gmx.de:3478"},{urls:"stun:stun.gmx.net:3478"},{urls:"stun:stun.halonet.pl:3478"},{urls:"stun:stun.hoiio.com:3478"},{urls:"stun:stun.hosteurope.de:3478"},{urls:"stun:stun.infra.net:3478"},{urls:"stun:stun.internetcalls.com:3478"},{urls:"stun:stun.intervoip.com:3478"},{urls:"stun:stun.ipfire.org:3478"},{urls:"stun:stun.ippi.fr:3478"},{urls:"stun:stun.ipshka.com:3478"},{urls:"stun:stun.it1.hr:3478"},{urls:"stun:stun.ivao.aero:3478"},{urls:"stun:stun.jumblo.com:3478"},{urls:"stun:stun.justvoip.com:3478"},{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun.linphone.org:3478"},{urls:"stun:stun.liveo.fr:3478"},{urls:"stun:stun.lowratevoip.com:3478"},{urls:"stun:stun.lundimatin.fr:3478"},{urls:"stun:stun.mit.de:3478"},{urls:"stun:stun.miwifi.com:3478"},{urls:"stun:stun.modulus.gr:3478"},{urls:"stun:stun.myvoiptraffic.com:3478"},{urls:"stun:stun.netappel.com:3478"},{urls:"stun:stun.netgsm.com.tr:3478"},{urls:"stun:stun.nfon.net:3478"},{urls:"stun:stun.nonoh.net:3478"},{urls:"stun:stun.nottingham.ac.uk:3478"},{urls:"stun:stun.ooma.com:3478"},{urls:"stun:stun.ozekiphone.com:3478"},{urls:"stun:stun.pjsip.org:3478"},{urls:"stun:stun.poivy.com:3478"},{urls:"stun:stun.powervoip.com:3478"},{urls:"stun:stun.ppdi.com:3478"},{urls:"stun:stun.qq.com:3478"},{urls:"stun:stun.rackco.com:3478"},{urls:"stun:stun.rockenstein.de:3478"},{urls:"stun:stun.rolmail.net:3478"},{urls:"stun:stun.rynga.com:3478"},{urls:"stun:stun.schlund.de:3478"},{urls:"stun:stun.sigmavoip.com:3478"},{urls:"stun:stun.sip.us:3478"},{urls:"stun:stun.sipdiscount.com:3478"},{urls:"stun:stun.sipgate.net:10000"},{urls:"stun:stun.sipgate.net:3478"},{urls:"stun:stun.siplogin.de:3478"},{urls:"stun:stun.sipnet.net:3478"},{urls:"stun:stun.sipnet.ru:3478"},{urls:"stun:stun.sippeer.dk:3478"},{urls:"stun:stun.siptraffic.com:3478"},{urls:"stun:stun.sma.de:3478"},{urls:"stun:stun.smartvoip.com:3478"},{urls:"stun:stun.smsdiscount.com:3478"},{urls:"stun:stun.solcon.nl:3478"},{urls:"stun:stun.solnet.ch:3478"},{urls:"stun:stun.sonetel.com:3478"},{urls:"stun:stun.sonetel.net:3478"},{urls:"stun:stun.sovtest.ru:3478"},{urls:"stun:stun.srce.hr:3478"},{urls:"stun:stun.stunprotocol.org:3478"},{urls:"stun:stun.t-online.de:3478"},{urls:"stun:stun.tel.lu:3478"},{urls:"stun:stun.telbo.com:3478"},{urls:"stun:stun.tng.de:3478"},{urls:"stun:stun.twt.it:3478"},{urls:"stun:stun.uls.co.za:3478"},{urls:"stun:stun.unseen.is:3478"},{urls:"stun:stun.usfamily.net:3478"},{urls:"stun:stun.viva.gr:3478"},{urls:"stun:stun.vivox.com:3478"},{urls:"stun:stun.vo.lu:3478"},{urls:"stun:stun.voicetrading.com:3478"},{urls:"stun:stun.voip.aebc.com:3478"},{urls:"stun:stun.voip.blackberry.com:3478"},{urls:"stun:stun.voip.eutelia.it:3478"},{urls:"stun:stun.voipblast.com:3478"},{urls:"stun:stun.voipbuster.com:3478"},{urls:"stun:stun.voipbusterpro.com:3478"},{urls:"stun:stun.voipcheap.co.uk:3478"},{urls:"stun:stun.voipcheap.com:3478"},{urls:"stun:stun.voipgain.com:3478"},{urls:"stun:stun.voipgate.com:3478"},{urls:"stun:stun.voipinfocenter.com:3478"},{urls:"stun:stun.voipplanet.nl:3478"},{urls:"stun:stun.voippro.com:3478"},{urls:"stun:stun.voipraider.com:3478"},{urls:"stun:stun.voipstunt.com:3478"},{urls:"stun:stun.voipwise.com:3478"},{urls:"stun:stun.voipzoom.com:3478"},{urls:"stun:stun.voys.nl:3478"},{urls:"stun:stun.voztele.com:3478"},{urls:"stun:stun.webcalldirect.com:3478"},{urls:"stun:stun.wifirst.net:3478"},{urls:"stun:stun.xtratelecom.es:3478"},{urls:"stun:stun.zadarma.com:3478"},{urls:"stun:stun1.faktortel.com.au:3478"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"stun:stun.nextcloud.com:443"},{urls:"stun:relay.webwormhole.io:3478"}]}}),console.log("Call user"),e.current.on("signal",(function(e){de.current.emit("callerSignal",{userToCall:t,signalData:e,from:r})})),de.current.emit("callUser",{userToCall:t,from:r}),e.current.on("stream",(function(e){me.current&&(me.current.srcObject=e)})),e.current.on("connect",(function(){h.b.info("Connected")})),de.current.on("callAccepted",(function(n){H(!0),oe(t),e.current.signal(n),re(!0),console.log("accepted"),te(!1)})),e.current.on("error",(function(e){console.log(e),"Call ended"!==e&&alert("Connection error or client closed webpage!"),oe(""),H(!1),re(!1),de.current.removeListener("callAccepted"),de.current.removeListener("videoStatusChange"),de.current.removeListener("audioStatusChange")})),de.current.on("callEnded",(function(){oe(""),H(!1),re(!1),de.current.removeListener("callAccepted"),de.current.removeListener("videoStatusChange"),de.current.removeListener("audioStatusChange")})),void de.current.on("error",(function(t){e.current.destroy(t.message)}));var t},disabled:ue,style:{margin:5}},"Call ",m[ee]))),_&&(Pe=u.a.createElement("video",{className:"partnerVideo",playsInline:!0,ref:me,autoPlay:!0}),Ae=u.a.createElement("div",{className:"endCallButton"},u.a.createElement(g.a,{variant:"danger",onClick:function(){return de.current.emit("endCall",{id:le}),void e.current.destroy("Call ended")}},"End Call")));var Be,Fe=ge?"success":"danger",Ie=he?"success":"danger",Ue=Oe?"success":"danger",Ge=ge?u.a.createElement(k.a,{size:20}):u.a.createElement(y.a,{size:20}),qe=he?u.a.createElement(j.a,{size:20}):u.a.createElement(O.a,{size:20}),Je=u.a.createElement(C.a,{size:20}),We=!_;return Me=u.a.createElement(x,{className:"justify-content-md-center"},u.a.createElement(g.a,{variant:Fe,onClick:ze,style:{margin:5},disabled:We}," ",Ge," "),u.a.createElement(g.a,{variant:Ie,onClick:function(){Re(400);var t=w.getAudioTracks()[0];"ended"===t.readyState?navigator.mediaDevices.getUserMedia({audio:!0}).then((function(n){var s=n.getAudioTracks()[0];w.removeTrack(t),w.addTrack(s),ke(!0),_&&e.current.replaceTrack(t,s,w)})):"live"===t.readyState&&(t.stop(),ke(!1),_&&e.current.replaceTrack(t,t,w))},style:{margin:5},disabled:We}," ",qe," "),u.a.createElement(g.a,{variant:Ue,onClick:Le,style:{margin:5},disabled:We}," ",Je," ")),"professor"!==m[r]&&Object.keys(m).forEach((function(e){e!==r&&"professor"===m[e]&&"Professor online"})),A&&m[le]&&G?(z.play(),Be=u.a.createElement("div",{className:"incommingCall"},u.a.createElement(f.a,{className:"text-center",style:{background:"black",color:"white"}},u.a.createElement(f.a.Header,null,u.a.createElement("h2",null,B," is calling you")),u.a.createElement(f.a.Body,null,u.a.createElement(f.a.Title,null),u.a.createElement(b.a,null,u.a.createElement(x,null,u.a.createElement(E.a,null,u.a.createElement(g.a,{size:"lg",variant:"danger",onClick:function(){}},"Reject")),u.a.createElement(E.a,null,u.a.createElement(g.a,{size:"lg",variant:"success",onClick:function(){z.pause(),z.currentTime=0,H(!0),M(!1),re(!0),e.current=new d.a({initiator:!1,trickle:!1,stream:w,reconnectTimer:!0}),e.current.on("signal",(function(e){de.current.emit("acceptCall",{signal:e,to:le})})),e.current.on("stream",(function(e){me.current.srcObject=e})),e.current.signal(G),e.current.on("connect",(function(){h.b.info("Connected")})),e.current.on("error",(function(e){console.log(e),"Call ended"!==e&&alert("Connection error or client closed webpage!"),H(!1),F(""),oe(""),q(),re(!1),de.current.removeListener("videoStatusChange"),de.current.removeListener("audioStatusChange")})),de.current.on("callEnded",(function(){H(!1),F(""),oe(""),q(),re(!1),de.current.removeListener("videoStatusChange"),de.current.removeListener("audioStatusChange")}))}},"Accept"))))),u.a.createElement(f.a.Footer,{className:"text-muted"})))):(z.pause(),z.currentTime=0),u.a.createElement(u.a.Fragment,null,Be,Pe,u.a.createElement("div",{className:"userElements"},xe,Me),u.a.createElement("div",{className:"userElementsLoadingBox",hidden:!K},u.a.createElement("div",{className:"userElementsLoading"},u.a.createElement(L,null))),Ae,u.a.createElement(b.a,{style:{color:"white"},fluid:!0},u.a.createElement(x,null,Ne," ",De),u.a.createElement(x,null,u.a.createElement(E.a,null,u.a.createElement("h4",null,"You: ",m[r]),Ve)),u.a.createElement(h.a,{autoClose:2e3})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(146),n(147);a.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,n){e.exports=n(148)},70:function(e,t,n){},71:function(e,t,n){}},[[65,1,2]]]);
//# sourceMappingURL=main.56c59eab.chunk.js.map
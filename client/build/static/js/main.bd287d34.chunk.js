(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{115:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),o=n.n(c),l=(n(55),n(6)),i=n(41),u=(n(56),n(42)),s=n.n(u),m=n(44),d=n(126),f=n(128),g=n(127),b=n(125),E=n(49),p=n(11),v=n(120),O=n(121),j=n(122),h=n(123),y=n(124),C=n(43),S=n.n(C);function k(){var e=Object(i.a)(["\n  display: flex;\n  width: 100%;\n"]);return k=function(){return e},e}var w=new Audio("./skype_remix_2.mp3");w.loop=!0;var T=function(){return r.a.createElement(S.a,{type:"TailSpin",color:"#00BFFF"})},D=m.a.div(k());var R=function(){var e=Object(a.useRef)(null),t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)({}),u=Object(l.a)(i,2),m=u[0],C=u[1],S=Object(a.useState)(),k=Object(l.a)(S,2),R=k[0],N=k[1],P=Object(a.useState)(!1),x=Object(l.a)(P,2),I=x[0],F=x[1],L=Object(a.useState)(""),B=Object(l.a)(L,2),A=B[0],z=B[1],G=Object(a.useState)(),M=Object(l.a)(G,2),U=M[0],W=M[1],J=Object(a.useState)(!1),V=Object(l.a)(J,2),_=V[0],H=V[1],Y=Object(a.useState)(!1),$=Object(l.a)(Y,2),q=$[0],K=($[1],Object(a.useState)(!1)),Q=Object(l.a)(K,2),X=Q[0],Z=Q[1],ee=Object(a.useState)(!1),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],re=Object(a.useState)(""),ce=Object(l.a)(re,2),oe=ce[0],le=ce[1],ie=Object(a.useRef)(),ue=Object(a.useRef)(),se=Object(a.useRef)(),me=Object(a.useState)(!0),de=Object(l.a)(me,2),fe=de[0],ge=(de[1],Object(a.useState)(!0)),be=Object(l.a)(ge,2),Ee=be[0],pe=(be[1],Object(a.useState)(!1)),ve=Object(l.a)(pe,2),Oe=(ve[0],ve[1],Object(a.useState)("user")),je=Object(l.a)(Oe,2),he=je[0];function ye(t){var n=new RTCIceCandidate(t);e.current.addIceCandidate(n).catch((function(e){return console.log(e)}))}function Ce(t){ae(!0),e.current=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}]}),console.log(e.current),se.current.on("ice-candidate",ye),e.current.onicecandidate=function(e){e.candidate&&se.current.emit("ice-candidate",{to:t,candidate:e.candidate})},e.current.ontrack=function(e){ue.current.srcObject=e.streams[0]},e.current.onnegotiationneeded=function(){e.current.createOffer().then((function(t){return e.current.setLocalDescription(t)})).then((function(){se.current.emit("callerSignal",{userToCall:t,signalData:e.current.localDescription,from:c})})).catch((function(e){return console.log(e)}))},se.current.emit("callUser",{userToCall:t,from:c}),R.getTracks().forEach((function(t){return e.current.addTrack(t,R)})),se.current.on("callAccepted",(function(n){H(!0),le(t);var a=new RTCSessionDescription(n);e.current.setRemoteDescription(a).catch((function(e){return console.log(e)})),ae(!0),console.log("accepted"),Z(!1)}))}je[1],Object(a.useEffect)((function(){se.current=s.a.connect(""),navigator.mediaDevices.getUserMedia({video:{facingMode:he},audio:!0}).then((function(e){N(e),ie.current&&(ie.current.srcObject=e)})).catch((function(e){p.b.error("Provide Permission")})),se.current.on("yourID",(function(e){o(e)})),se.current.on("allUsers",(function(e){console.log(e),C(e)})),se.current.on("receiveSignal",(function(e){console.log("Reciving signal"),W(e.signal)})),se.current.on("receiveCall",(function(e){console.log("Reciving"),F(!0),ae(!0),z(e.from.name),le(e.from.id)})),se.current.on("changeNameStatus",(function(e){e.status||p.b.error("name already taken!")}))}),[]),Object(a.useEffect)((function(){se.current.on("callPermissionGranted",(function(e){m[e.from]&&(console.log("Permission Granted from "+m[e.from]),Z(e.from))}))}),[m]);var Se,ke,we,Te,De,Re,Ne=r.a.createElement(d.a,{onSubmit:function(e){e.preventDefault();var t=e.target.name.value,n=!1;Object.keys(m).forEach((function(e){e!==c&&t===m[e]&&(n=!0)})),n?p.b.error("name already taken!"):se.current.emit("changeName",{name:t})}},r.a.createElement(d.a.Group,{controlId:"name"},r.a.createElement(d.a.Label,null,"Change Display name"),r.a.createElement(d.a.Control,{type:"text",placeholder:"Enter name"})),r.a.createElement(f.a,{variant:"primary",type:"submit",size:"sm"},r.a.createElement("small",null,"Change Name")));return R&&(Se=r.a.createElement("video",{className:"userVideo",playsInline:!0,muted:!0,ref:ie,autoPlay:!0}),"professor"===m[c]?ke=Object.keys(m).map((function(e){return e===c?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{variant:"primary",onClick:function(){return Ce(e)},disabled:ne,style:{margin:5}},"Call ",m[e]),r.a.createElement(f.a,{variant:"success",onClick:function(){return t=e,void se.current.emit("giveCallPermission",{from:c,to:t});var t},disabled:ne,style:{margin:5}},"give Permission to ",m[e]))})):X&&(we=r.a.createElement(f.a,{variant:"primary",onClick:function(){return Ce(X)},disabled:ne,style:{margin:5}},"Call ",m[X]))),_&&(Te=r.a.createElement("video",{className:"partnerVideo",playsInline:!0,ref:ue,autoPlay:!0})),fe?v.a:O.a,Ee?j.a:h.a,y.a,"professor"!==m[c]&&Object.keys(m).forEach((function(e){e!==c&&"professor"===m[e]&&(De="Professor online")})),I&&m[oe]&&U?(w.play(),Re=r.a.createElement("div",{className:"incommingCall"},r.a.createElement(g.a,{className:"text-center",style:{background:"black",color:"white"}},r.a.createElement(g.a.Header,null,r.a.createElement("h2",null,A," is calling you")),r.a.createElement(g.a.Body,null,r.a.createElement(g.a.Title,null),r.a.createElement(b.a,null,r.a.createElement(D,null,r.a.createElement(E.a,null,r.a.createElement(f.a,{size:"lg",variant:"danger",onClick:function(){}},"Reject")),r.a.createElement(E.a,null,r.a.createElement(f.a,{size:"lg",variant:"success",onClick:function(){w.pause(),w.currentTime=0,H(!0),F(!1),ae(!0),e.current=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}]}),se.current.on("ice-candidate",ye),e.current.onicecandidate=function(e){e.candidate&&se.current.emit("ice-candidate",{to:oe,candidate:e.candidate})},e.current.ontrack=function(e){ue.current.srcObject=e.streams[0]},e.current.onnegotiationneeded=function(){e.current.createOffer().then((function(t){return e.current.setLocalDescription(t)})).then((function(){})).catch((function(e){return console.log(e)}))};var t=new RTCSessionDescription(U);e.current.setRemoteDescription(t).then((function(){R.getTracks().forEach((function(t){return e.current.addTrack(t,R)}))})).then((function(){return e.current.createAnswer()})).then((function(t){return e.current.setLocalDescription(t)})).then((function(){se.current.emit("acceptCall",{signal:e.current.localDescription,to:oe})}))}},"Accept"))))),r.a.createElement(g.a.Footer,{className:"text-muted"})))):(w.pause(),w.currentTime=0),r.a.createElement(r.a.Fragment,null,Re,Te,r.a.createElement("div",{className:"userElements"},Se,void 0),r.a.createElement("div",{className:"userElementsLoadingBox",hidden:!q},r.a.createElement("div",{className:"userElementsLoading"},r.a.createElement(T,null))),void 0,r.a.createElement(b.a,{style:{color:"white"},fluid:!0},r.a.createElement(D,null,ke," ",we),r.a.createElement(D,null,r.a.createElement(E.a,null,r.a.createElement("h4",null,"You: ",m[c]),Ne,r.a.createElement(D,{style:{color:"green",fontWeight:"bold"}},De))),r.a.createElement(p.a,{autoClose:2e3})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(113),n(114);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},50:function(e,t,n){e.exports=n(115)},55:function(e,t,n){},56:function(e,t,n){},87:function(e,t){}},[[50,1,2]]]);
//# sourceMappingURL=main.bd287d34.chunk.js.map